include ':app'

// Capacitor plugins
def capacitorModules = [
    ':capacitor-android',
    ':capacitor-community-sqlite',
    ':capacitor-filesystem',
    ':capacitor-share',
    ':capacitor-toast'
]

// Auto-include node_modules Capacitor plugins
def nodeModulesDir = new File('../node_modules')

capacitorModules.each { module ->
    def moduleName = module.replace(':', '').replace('-', '_')
    def pluginDir = null

    switch(module) {
        case ':capacitor-android':
            pluginDir = new File('../node_modules/@capacitor/android')
            break
        case ':capacitor-community-sqlite':
            pluginDir = new File('../node_modules/@capacitor-community/sqlite/android')
            break
        case ':capacitor-filesystem':
            pluginDir = new File('../node_modules/@capacitor/filesystem/android')
            break
        case ':capacitor-share':
            pluginDir = new File('../node_modules/@capacitor/share/android')
            break
        case ':capacitor-toast':
            pluginDir = new File('../node_modules/@capacitor/toast/android')
            break
    }

    if (pluginDir != null && pluginDir.exists()) {
        include module
        project(module).projectDir = pluginDir
    }
}

// Capacitor Cordova plugins
include ':capacitor-cordova-android-plugins'
project(':capacitor-cordova-android-plugins').projectDir = new File('./capacitor-cordova-android-plugins')
